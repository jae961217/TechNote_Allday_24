[TOC]



## 3. 데이터 입출력 구현

### 1. 논리 데이터 저장소 확인

#### 1. 데이터 모델

- 데이터 모델링 절차 : **개논물**

  |        절차        |                             설명                             |
  | :----------------: | :----------------------------------------------------------: |
  | 개념적 데이터 모델 | 현실 세계 인식 -> 추상, 개념적 표현, 개념적 구조 도출<br />트랜잭션 모델링, View 통합방법, Attribute 합성 고려<br />DB 종류와 관계 X<br />개체관계 다이어그램 |
  | 논리적 데이터 모델 | 업무 모습, 사람이 이해하기 쉽게<br />관계, 계층, 네트워크, 객체지향, 객체-관계 데이터 모델 중 선택<br />목표 DBMS에 맞는 스키마, 트랜잭션 인터페이스 설계<br />정규화, 논리 DB 구조로 매핑 |
  | 물리적 데이터 모델 | 특정 DBMS 특성, 성능 고려 -> 물리적 스키마 제작, DB 저장 구조 변환<br />객체 생성 (테이블, 인덱스, 뷰, 파티션)<br />응답시간, 저장공간 효율, 트랜잭션 처리 고려 설계<br />반 정규화<br />저장 레코드 양식, 접근 경로 설계 |

#### 2. 논리 데이터 모델 검증

- 관계 대수

  - 일반 집합 연산 : **합교차카**

    - 합집합, 교집합, 차집합
    - 카티션 프로덕트 : `X`, 모든 튜플 연결

  - 순수 관계 연산자 : **셀프조디**

    |  연산자  | 기호 |       표현        |               설명                |
    | :------: | :--: | :---------------: | :-------------------------------: |
    |  셀렉트  |  σ   |    σ(조건)(R)     |        조건 만족 튜플 반환        |
    | 프로젝트 |  π   | π(속성 리스트)(R) | 주어진 속성 값으로만 된 튜플 반환 |
    |   조인   |  ▷◁  |  R▷◁(JOIN 조건)S  |        공통 속성 튜플 반환        |
    |  디비전  |  ÷   |       R ÷ S       |  S 모든 튜플과 관련 R 튜플 반환   |

- 논리 데이터 모델링 속성 : **개속관**

  |        구조         |        설명         |
  | :-----------------: | :-----------------: |
  |    개체 (Entity)    |   관리 대상 실체    |
  |  속성 (Attribute)   | 관리 정보 구체 항목 |
  | 관계 (Relationship) |  개체 간 대응 관계  |

- 개체-관계 (E-R) 모델

  - 요구사항에서 얻어낸 정보 -> 개체, 속성, 관계로 기술 데이터 모델

    |      구성      |   기호   |
    | :------------: | :------: |
    |      개체      |  사각형  |
    |      관계      |  마름모  |
    |      속성      |   타원   |
    |  다중 갑 속성  | 이중타원 |
    | 관계-속성 연결 |    선    |

- 정규화 : 관계형 데이터 모델 -> 중복성 X => 이상 현상 방지 / 일관, 정확성 유지 => 무손실 분해

  - 이상 현상 (Anomaly) : **삽삭갱**, 데이터 중복성 -> 릴레이션 조작 시 발생 비합리적 현상

    | 이상 현상 |                      설명                       |
    | :-------: | :---------------------------------------------: |
    | 삽입 이상 |       저장 시 불필요한 세부정보 입력 필수       |
    | 삭제 이상 |         삭제 시 다른 정보까지 같이 삭제         |
    | 갱신 이상 | 중복 데이터 중 특정 부분만 수정 -> 중복 값 모순 |

  - 정규화 단계 : **원부이 결다조**

    |           단계            |                             조건                             |
    | :-----------------------: | :----------------------------------------------------------: |
    |       1정규형 (1NF)       |                         원자값 구성                          |
    |       2정규형 (2NF)       |         부분 함수 종속 제거 -> 완전 함수적 종속 관계         |
    |       3정규형 (3NF)       |                      이행함수 종속 제거                      |
    | 보이스-코드 정규형 (BCNF) | 결정자 후보 키 아닌 함수 종속 제거<br />-> 모든 결정자 : 후보 키 |
    |       4정규형 (4NF)       |                   다차 (다중 값) 종속 제거                   |
    |       5정규형 (5NF)       |                        조인 종속 제거                        |

- 반 정규화 : 정규화된 객체, 속성, 관계  -> 성능 향상, 개발 운영 단순화 목적 => 중복, 통합, 분리 수행 데이터 모델링 기법

  - 기법 : **테병분중 컬중 관중**
    - 테이블
      - 병합 : 1:1, 1:M 통합 -> 조인 횟수 줄여서, 슈퍼/서브 타입 테이블 통합 => 성능 향상
      - 분할 
        - 수평 : 레코드 기준
        - 수직 : 컬럼 개수 증가할 때, 갱신 위주 / 자주 조회 속성 / 크기 큰 / 보안 적용 속성 분할
      - 중복 테이블 추가 : 대량 데이터 집계함수 -> 실시간 통계정보 계산 시 => 별도 통계 테이블, 중복 테이블 추가
        - 집계 테이블 추가 : 각 원본 테이블에 트리거 설정, 트리거 오버헤드 유의
        - 진행 테이블 추가 : 기본키 설정
        - 특정 부분만 포함 테이블 추가 
    - 컬럼
      - 컬럼 중복화 : 조인 성능 향상하도록 중복 허용
    - 관계
      - 중복관계 추가 : 조인 가능 but 성능 저하 예방하도록 추가적 관계

### 2. 물리 데이터 저장소 설계

#### 1. 물리 데이터 모델 설계

- 물리 데이터 모델링 : 논리 모델 -> 적용하고자 하는 기술에 맞도록 상세화 하는 과정

#### 2. 물리 데이터 저장소 구성

- 인덱스 설계

  - 개념
    - 검색 연산 최적화 -> DB 내 열 정보 구성 데이터 구조
    - 전체 데이터 검색 없이 필요한 정보 신속 조회
  - 분포도 : 적정 10~15%
    - (1 / 컬럼 값 종류) * 100
    - (컬럼 값 평균 row 수 / 테이블 총 row 수) * 100
  - 컬럼 선정
    - 분포도 좋음 -> 단독 생성
    - 자주 조합 사용 컬럼 : 결합 인덱스로 생성

- 파티션 설계

  - 종류 : **레해리컴**

    - 레인지 파티셔닝 (Range) : 연속적 숫자, 날짜 -> 손쉬운 과리 기법 => 관리 시간 단축
    - 해시 파티셔닝 (Hash) : 파티션 키 해시 함수 값 -> 균등한 데이터 분할, 질 성능 향상
    - 리스트 파티셔닝 : 특정 파티션에 저장 될 데이터 명시적 제어 가능 -> 분포도 비슷, 데이터 많은 SQL에서 컬럼 조건 많이 들어올 때
    - 컴포지트 (Composite) : 2개 이상 파티셔닝 결합 -> 큰 파티션 I/O 요청 => 여러 파티션으로 분산

  - 장점 : **성가백합**

    |    속성     |                 설명                  |
    | :---------: | :-----------------------------------: |
    |  성능 향상  |        데이터 액세스 범위 감소        |
    | 가용성 향상 |     전체 데이터 훼손 가능성 감소      |
    |  백업 가능  |    분할 영역 -> 독립적 백업, 복구     |
    |  경합 감소  | 디스크 스트라이핑 -> 입출력 성능 향상 |

### 3. DB 기초 활용하기

#### 1. DB 종류

- DB : 다수 인원, 시스템, 프로그램이 사용할 목적 -> 통합하여 관리되는 데이터 집합

  - 정의

    |                 정의                 |                    설명                    |
    | :----------------------------------: | :----------------------------------------: |
    | 통합된 데이터<br />(Integrated Data) |             중복 X 데이터 모임             |
    |   저장된 데이터<br />(Stored Data)   |         저장 매체에 저장된 데이터          |
    | 운영 데이터<br />(Operational Data)  |      조직 업무 수행 시 필요한 데이터       |
    |    공용 데이터<br />(Shared Data)    | 여러 애플리케이션, 시스템 공동 사용 데이터 |

  - 특성

    |                     특성                     |                             설명                             |
    | :------------------------------------------: | :----------------------------------------------------------: |
    | 실시간 접근성<br />(Real-Time Accessibility) |                     쿼리 -> 실시간 응답                      |
    |   계속적인 변화<br />(Continous Evolution)   | 새로운 데이터 삽입 (Insert), 삭제 (Delete), 갱신 (Update)<br />-> 항상 최신 데이터 유지 |
    |     동시 공용<br />(Concurrent Sharing)      |          다수 사용자 -> 동시 같은 내용 데이터 이용           |
    |      내용 참조<br />(Content Reference)      |           사용자 요구 데이터 내용으로 데이터 탐색            |

  - 종류

    - 계층형 DBMS (Hierarchical) : 상하 종속적 관계, 접근 속도 빠름, 변화에 유연한 대응 hard

- DBMS : 데이터 관리 복잡성 해결 + 데이터 추가, 변경, 검색, 삭제, 백업, 복구, 보안 기능 지원 소프트웨어

  - 유형 : **키컬도그**

    |                         유형                          |                             설명                             |
    | :---------------------------------------------------: | :----------------------------------------------------------: |
    |                   키-값 (Key-Value)                   | 키 기반 Get, Put, Delete 제공<br />메모리 기반 -> 성능 우선 시스템, 빅테이터 처리 가능<br />Unique 한 키에 하나의 값 |
    | 컬럼 기반 데이터 저장<br />(Column Family Data Store) | Key 안 (Column, Value) 조합 여러 개 필드<br />테이블 기반, 조인 미지원, 컬럼 기반 -> 구글 Bigtable 기반 |
    |              문서 저장 (Document Store)               | Value 데이터 타입 -> Document<br />문서 타입 XML, JSON -> 구조화된 데이터 타입, 복잡한 계층 구조 표현 가능 |
    |                    그래프 (Graph)                     | 시맨팁 웹, 온톨로지 분야<br />노드, 엣지 특징 요소 특화 -> 노드 간 관계 구조화 후 저장 |

    - 온톨리지 (Ontology) : 실세계 존재 모든 개념, 개념 속성, 개념 간 관계 정보 -> 컴퓨터 이해하도록 서술한 지식 베이스

  - 특징

    |  특징  |                       설명                        |
    | :----: | :-----------------------------------------------: |
    | 무결성 |          동일 내용에 다른 데이터 저장 X           |
    | 일관성 |       삽입, 삭제, 갱신, 생성 후 데이터 일정       |
    | 회복성 |                   장애 -> 복구                    |
    | 보안성 |        불법적 노출, 변경, 손실로부터 보호         |
    | 효율성 | 응답 시간, 저장 공간 활용 최적화 -> 요구조건 만족 |

- DB 기술 트렌드

  - 빅데이터 : 주어진 비용, 시간 내에 처리 가능한 데이터 범위 넘어서는 수십 페타바이트 크기 비정형 데이터

    - 특성

      |       특성       |                             설명                             |
      | :--------------: | :----------------------------------------------------------: |
      |   양 (Volume)    |  페타바이트 수준, 분석 규모, 디지털 정보량 기하급수적 폭증   |
      | 다양성 (Variety) |         정/비정/반정형, 자원 유형, 데이터 유형 다양          |
      | 속도 (Velocity)  | 빠르게 증가, 수집, 처리 데이터 / 수집, 분석, 활용 속도 / 실시간 분석 |

    - 수집, 저장, 처리 기술

      |         구분          |                             설명                             |
      | :-------------------: | :----------------------------------------------------------: |
      | 비/반정형 데이터 수집 | 내외부 정제 X 데이터 확보 -> 정보 추출<br />-> 척와 (Chukwa), 플럼 (Flume), 스크라이브 (Scribe) |
      |   정형 데이터 수집    | 내외부 정제 대용량 데이터 수집, 전송 기술<br />-> ETL, FTP, 스쿱 (Sqoop), 하이호 (Hiho) |
      | 분산데이터 저장/처리  |                      -> HDFS, 맵 리듀스                      |
      |        분산 DB        | HDFS 칼럼 기반 DB -> 실시간 랜덤 조회, 업데이터<br />-> HBase |

      - HDFS : 대용량 데이터 집합 처리 응용 프로그램에 적합하도록 설계된 분산 파일 시스템
      - 맵 리듀스 : 구글 -> 대용량 데이터 처리 -> 분산 병렬 컴퓨팅 처리 목적

  - NoSQL (Not Only SQL) : 전통적 RDBMS와 다름 -> 고정된 테이블 스키마 필요 X, 조인 연산 X, 수평적 확장 가능 DBMS

    - 특성 (BASE)

      |          특성          |                             설명                             |
      | :--------------------: | :----------------------------------------------------------: |
      |  Basically Available   |              언제든지 접근 가능 -> 항상 가용성               |
      |       Soft-State       | 외부에서 전송된 정보를 통해 결정<br />특정 시점 -> 데이터 일관성 보장 X |
      | Eventually Consistency |            일정 시간이 지나면 데이터 일관성 유지             |

    - 유형 : **키컬도그**

  - 데이터 마이닝 : 대규모 저장 데이터 속 체계, 자동적으로 통계적, 패턴 찾아내는 기술

    - 텍스트 마이닝 : 대량 텍스트 데이터 -> 패턴, 관계 추출 / 비/반정형 데이터 -> 자연처 처리 기술 => 의미 있는 정보

    - 기법 : **분연 연데**

      |            주요 기법             |                             설명                             |
      | :------------------------------: | :----------------------------------------------------------: |
      | 분류 규칙 <br />(Classification) | 과거 데이터 -> 특성 => 분류 모형 => 새로운 레코드 결과 값 예측<br />마케팅, 고객 신용평가 |
      |   연관 규칙<br />(Association)   |               데이터 안 존재 항목 간 종속관계                |
      |    연속 규칙<br />(Sequence)     | 연관 규칙 + 시간 관련 정보<br />개인별 트랜잭션 이력 데이터 -> 시계열적 분석 => 트랜잭션 향후 발생 가능성 예측 |
      | 데이터 군집화<br />(Clustering)  | 유사 특성 소그룹 분할 -> 분류 규칙 유사<br />정보 없는 상태에서 데이터 분류<br />분석 대상 결괏값 X, 판촉 활동, 이벤트 대상 선정 |

      